# SPECaS (Spec-as-Source)

Proposes to be an oopen standard for a lightweight framework for treating product specs as **source code**: human-readable, AI-executable, and enforced through Git-native workflows.

## Why
Classic specs fell out of favor in agile shops—too long, out of date, rarely read. Modern AI changes the calculus: short **atomic requirements** (atoms) with invariants, acceptance, test vectors, and prompts can be diffed, reviewed (deliberated), executed, and evaluated—just like code.

"Spec as Source" was described by Sean Grove in a talk he gave called "The New Code".

## Repository layout
- `spec.md` — **template** spec that demonstrates the expected section ordering and atom structure. Use it as a starting point for new product specs.
- `training.md` — contributor guide for spec authors and reviewers.
- `CODEOWNERS` — example CODEOWNERS rules for stewardship of the framework docs.
- `specs/insights-hub/insights-hub-0.6.0.md` — **stub** product spec currently in development for the Insights Hub initiative.
- `tools/` — local utilities that back the framework:
  - `lint_spec.py` — lints spec structure; see “Authoring workflow.”
  - `extract_atoms.py` — parses atoms from Markdown into JSON.
  - `run_graders.py` — sample grader that validates extracted atoms.
  - `changed_atoms.py`, `run_regression.py`, `verify_bump.py` — CLI helpers for future automation (**stub**).
  - `atom_schema.json` — JSON Schema for individual atoms.
  - `spec_schema.json` — JSON Schema for validating whole spec files.
- `.github/PULL_REQUEST_TEMPLATE.md` — **proposed**. Include an SCR-focused PR template here when GitHub workflows are needed.
- `.github/workflows/spec-ci.yml` — **proposed** GitHub Actions workflow to run linting, extraction, and graders in CI.
- `tools/out/atoms.json` — **proposed** build artifact generated by extraction scripts.

## Authoring workflow
1. Copy `spec.md` into a new folder under `specs/<product-or-feature>/spec.md` when starting a new spec. It is intentionally a sample template; adapt the content and section scaffolding to your initiative.
2. While iterating on a spec, validate it locally:
   ```bash
   python tools/lint_spec.py <path-to-spec>
   python tools/extract_atoms.py <path-to-spec> --schema tools/atom_schema.json --out /tmp/atoms.json
   python tools/run_graders.py --atoms /tmp/atoms.json
   ```
3. When you need full-document guarantees, convert your spec to JSON (via your own pipeline or extended tooling) and validate it against `tools/spec_schema.json` with any JSON Schema validator, for example:
   ```bash
   python -m jsonschema --instance /path/to/spec.json --schema tools/spec_schema.json
   ```
   The schema encodes the canonical structure expected by this framework.
4. Commit changes via Spec Change Requests (SCRs) in Git. Use the branch naming and review practices described in `training.md`.

> **Versioning note for contributors & agents:** When updating a spec, record today's date in `yyyy-mm-dd` format as the last updated value, then bump the semantic-style version using this rule of thumb inspired by `training.md`:
> - Patch (`00.00.+1`) for typo fixes or other tiny corrections.
> - Minor (`00.+1.00`) for incremental capability adjustments that keep backwards compatibility.
> - Major (`+1.00.00`) for breaking or structural shifts.
>
> Save the refreshed spec as `spec-folder-name-version.number.md`, keeping only the newest file (delete the prior version) so history is maintained through Git rather than duplicate files. For example, files under `specs/insights-hub/` should follow the pattern `insights-hub-<version>.md` to match the README references and keep the directory self-documenting.

> **Agent note:** After creating or updating a spec, always run `python tools/lint_spec.py <path-to-spec>` to catch structural issues before opening a PR.

## Roadmap
- Establish `.github` automation for SCR validation (**proposed**).
- Flesh out advanced tooling in `tools/` for regression analysis and release verification (**stub**).
- Add more product specs under `specs/` as initiatives come online.

*Context is the competitive advantage. Treat the spec as your highest-leverage code.*
